import{assignProps}from"@just4/util/object";import{joinURL,concatURLParams}from"./internal/util";export{xhrAdapter}from"./adapter/xhr";export{wxRequestAdapter}from"./adapter/wx-request";export{RequestError,RequestErrorType}from"./request-error";export class Request{constructor(e,r){this._baseOptions=Object.create(null),this._adapter=e,this.mixBaseOptions(r)}mixBaseOptions(e){return assignProps(this._baseOptions,e),assignProps(Object.create(null),this._baseOptions)}send(e,r){const s=assignProps(Object.create(null),r,this._baseOptions);return s.baseURL&&(e=joinURL(s.baseURL,e)),e=concatURLParams(e,s.params,s.preventCaching),this._adapter.send(Object.freeze({url:e,baseURL:s.baseURL,params:s.params,data:s.data,headers:s.headers||Object.create(null),method:(s.method||"GET").toUpperCase(),requestType:(s.requestType||"").toLowerCase(),responseType:(s.responseType||"json").toLowerCase(),withCredentials:s.withCredentials,timeout:s.timeout,preventCaching:s.preventCaching,username:s.username,password:s.password,beforeSend:s.beforeSend,receiveTaskId:s.receiveTaskId,onUploadProgress:s.onUploadProgress,onDownloadProgress:s.onDownloadProgress}))}abort(e){return this._adapter.abort(e)}}