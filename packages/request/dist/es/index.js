import{assignProps}from"@just4/util/object";import{joinURL,concatURLParams}from"./internal/util";export{RequestError,RequestErrorType}from"./request-error";export class Request{constructor(e,s){this._baseOptions=Object.create(null),this._adapter=e,this.mixBaseOptions(s)}mixBaseOptions(e){return assignProps(this._baseOptions,e),assignProps(Object.create(null),this._baseOptions)}send(e,s){var r;let t=assignProps(Object.create(null),s,this._baseOptions);const o=t.beforeSend;return"function"==typeof o&&(t=null!==(r=o(t))&&void 0!==r?r:t),t.baseURL&&(e=joinURL(t.baseURL,e)),e=concatURLParams(e,t.params,t.preventCaching),this._adapter.send(Object.freeze({url:e,baseURL:t.baseURL,params:t.params,data:t.data,headers:t.headers||Object.create(null),method:(t.method||"GET").toUpperCase(),requestType:(t.requestType||"").toLowerCase(),responseType:(t.responseType||"json").toLowerCase(),withCredentials:t.withCredentials,timeout:t.timeout,preventCaching:t.preventCaching,username:t.username,password:t.password,beforeSend:t.beforeSend,beforeXhrSend:t.beforeXhrSend,receiveTaskId:t.receiveTaskId,onUploadProgress:t.onUploadProgress,onDownloadProgress:t.onDownloadProgress,extra:t.extra}))}get(e,s){const r=assignProps(Object.create(null),s);return r.method="GET",this.send(e,r)}post(e,s){const r=assignProps(Object.create(null),s);return r.method="POST",this.send(e,r)}abort(e){return this._adapter.abort(e)}}