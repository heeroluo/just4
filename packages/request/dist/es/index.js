import{assignProps}from"@just4/util/object";import{joinURL,concatURLParams}from"./internal/util";export{xhrAdapter}from"./adapter/xhr";export{wxRequestAdapter}from"./adapter/wx-request";export{RequestError,RequestErrorType}from"./request-error";export class Request{constructor(e,r){this._baseOptions=Object.create(null),this._adapter=e,this.mixBaseOptions(r)}mixBaseOptions(e){return assignProps(this._baseOptions,e),assignProps(Object.create(null),this._baseOptions)}send(e,r){var s;let t=assignProps(Object.create(null),r,this._baseOptions);const a=t.beforeSend;return"function"==typeof a&&(t=null!==(s=a(t))&&void 0!==s?s:t),t.baseURL&&(e=joinURL(t.baseURL,e)),e=concatURLParams(e,t.params,t.preventCaching),this._adapter.send(Object.freeze({url:e,baseURL:t.baseURL,params:t.params,data:t.data,headers:t.headers||Object.create(null),method:(t.method||"GET").toUpperCase(),requestType:(t.requestType||"").toLowerCase(),responseType:(t.responseType||"json").toLowerCase(),withCredentials:t.withCredentials,timeout:t.timeout,preventCaching:t.preventCaching,username:t.username,password:t.password,beforeSend:t.beforeSend,beforeXhrSend:t.beforeXhrSend,receiveTaskId:t.receiveTaskId,onUploadProgress:t.onUploadProgress,onDownloadProgress:t.onDownloadProgress,extra:t.extra}))}get(e,r){const s=assignProps(Object.create(null),r);return s.method="GET",this.send(e,s)}post(e,r){const s=assignProps(Object.create(null),r);return s.method="POST",this.send(e,s)}abort(e){return this._adapter.abort(e)}}