<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@just4/cookie</title><meta name="description" content="Documentation for @just4/cookie"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@just4/cookie</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>@just4/cookie</h1></div><div class="tsd-panel tsd-typography"><a id="md:just4cookie" class="tsd-anchor"></a><h1 class="tsd-anchor-link">@just4/cookie<a href="#md:just4cookie" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>提供浏览器端的 cookie 操作接口。</p>
<a id="md:特性" class="tsd-anchor"></a><h2 class="tsd-anchor-link">特性<a href="#md:特性" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>提供了浏览器端 cookie 读取、写入以及删除的接口。</li>
<li>写入 cookie 时，支持设置有效时间、主机名、路径、Secure、SameSite 等属性。</li>
</ul>
<a id="md:安装" class="tsd-anchor"></a><h2 class="tsd-anchor-link">安装<a href="#md:安装" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1"> </span><span class="hl-2">@just4/cookie</span>
</code><button type="button">Copy</button></pre>

<a id="md:调用" class="tsd-anchor"></a><h2 class="tsd-anchor-link">调用<a href="#md:调用" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>安装完毕之后，就可以引入并调用相关的方法：</p>
<pre><code class="javascript"><span class="hl-3">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">getCookie</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">setCookie</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">removeCookie</span><br/><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@just4/cookie&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<a id="md:读取-cookie" class="tsd-anchor"></a><h3 class="tsd-anchor-link">读取 cookie<a href="#md:读取-cookie" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="javascript"><span class="hl-0">getCookie</span><span class="hl-1">(</span><span class="hl-2">&#39;nickname&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>默认情况下，读取 cookie 时分别是用 <code>encodeURIComponent</code> 和 <code>decodeURIComponent</code> 进行编码和解码的。如果要用其他编解码函数，可以通过 <code>encode</code> 和 <code>decode</code> 选项指定。</p>
<pre><code class="javascript"><span class="hl-0">getCookie</span><span class="hl-1">(</span><span class="hl-2">&#39;nickname&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-4">content</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">//...</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-0">decode</span><span class="hl-1">(</span><span class="hl-4">content</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">//...</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:写入-cookie" class="tsd-anchor"></a><h3 class="tsd-anchor-link">写入 cookie<a href="#md:写入-cookie" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>最简单的 cookie 写入只需指定 key 和 value 的值。</p>
<pre><code class="javascript"><span class="hl-0">setCookie</span><span class="hl-1">(</span><span class="hl-2">&#39;nickname&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Tom&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>但 Cookie 还有多个属性（见 MDN 的《<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Set-Cookie" target="_blank" class="external">Set-Cookie</a>》文档），除了 HttpOnly 以外，其他均可在浏览器端进行设置。可通过 <code>setCookie</code> 函数的选项参数对 cookie 的属性进行设置。</p>
<a id="md:有效时间" class="tsd-anchor"></a><h4 class="tsd-anchor-link">有效时间<a href="#md:有效时间" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>有效时间有<strong>绝对时间</strong>和<strong>相对时间</strong>两种形式：</p>
<ul>
<li>使用绝对时间时，要传入对应时间点的日期对象。</li>
<li>使用相对时间时，传入“数量 单位”格式的字符串，其中单位可以为单数也可以为复数。</li>
</ul>
<pre><code class="javascript"><span class="hl-5">// 相对时间</span><br/><span class="hl-0">setCookie</span><span class="hl-1">(</span><span class="hl-2">&#39;nickname&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Tom&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">expires:</span><span class="hl-1"> </span><span class="hl-2">&#39;1 month&#39;</span><span class="hl-1">  </span><span class="hl-5">// 有效时间为一个月</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<pre><code class="javascript"><span class="hl-5">// 相对时间</span><br/><span class="hl-0">setCookie</span><span class="hl-1">(</span><span class="hl-2">&#39;nickname&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Tom&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">expires:</span><span class="hl-1"> </span><span class="hl-2">&#39;2 years&#39;</span><span class="hl-1">  </span><span class="hl-5">// 有效时间为两年</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<pre><code class="javascript"><span class="hl-5">// 绝对时间</span><br/><span class="hl-0">setCookie</span><span class="hl-1">(</span><span class="hl-2">&#39;nickname&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Tom&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">expires:</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">(</span><span class="hl-7">2023</span><span class="hl-1">, </span><span class="hl-7">0</span><span class="hl-1">, </span><span class="hl-7">1</span><span class="hl-1">)  </span><span class="hl-5">// 2023 年 1 月 1 日 0 点过期</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:主机名和路径" class="tsd-anchor"></a><h4 class="tsd-anchor-link">主机名和路径<a href="#md:主机名和路径" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="javascript"><span class="hl-0">setCookie</span><span class="hl-1">(</span><span class="hl-2">&#39;nickname&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Tom&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">domain:</span><span class="hl-1"> </span><span class="hl-2">&#39;.abc.com&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">path:</span><span class="hl-1"> </span><span class="hl-2">&#39;/&#39;</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:仅在-https-请求中可用" class="tsd-anchor"></a><h4 class="tsd-anchor-link">仅在 https 请求中可用<a href="#md:仅在-https-请求中可用" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="javascript"><span class="hl-0">setCookie</span><span class="hl-1">(</span><span class="hl-2">&#39;nickname&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Tom&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">secure:</span><span class="hl-1"> </span><span class="hl-6">true</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:samesite" class="tsd-anchor"></a><h4 class="tsd-anchor-link">SameSite<a href="#md:samesite" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>关于 SameSite 的说明可以参阅 MDN 的《<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Set-Cookie/SameSite" target="_blank" class="external">SameSite cookies</a>》。</p>
<pre><code class="javascript"><span class="hl-0">setCookie</span><span class="hl-1">(</span><span class="hl-2">&#39;nickname&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Tom&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">sameSite:</span><span class="hl-1"> </span><span class="hl-2">&#39;strict&#39;</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<pre><code class="javascript"><span class="hl-5">// SameSite 设为 none 时需要同时设置 Secure</span><br/><span class="hl-0">setCookie</span><span class="hl-1">(</span><span class="hl-2">&#39;nickname&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;Tom&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">sameSite:</span><span class="hl-1"> </span><span class="hl-2">&#39;none&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">secure:</span><span class="hl-1"> </span><span class="hl-6">true</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:指定内容编码" class="tsd-anchor"></a><h4 class="tsd-anchor-link">指定内容编码<a href="#md:指定内容编码" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>默认情况下，写入 cookie 时是用 <code>encodeURIComponent</code> 进行编码的。如果要用其他编码函数，可以通过 <code>encode</code> 选项指定。</p>
<pre><code class="javascript"><span class="hl-0">setCookie</span><span class="hl-1">(</span><span class="hl-2">&#39;nickname&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;汤姆&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-4">content</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">//...</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:删除-cookie" class="tsd-anchor"></a><h3 class="tsd-anchor-link">删除 cookie<a href="#md:删除-cookie" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="javascript"><span class="hl-0">removeCookie</span><span class="hl-1">(</span><span class="hl-2">&#39;nickname&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>删除 cookie 实质上是把 cookie 设为过期，因此 <code>removeCookie</code> 支持 <code>setCookie</code> 的所有选项。</p>
<a id="md:相关文档" class="tsd-anchor"></a><h2 class="tsd-anchor-link">相关文档<a href="#md:相关文档" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><a href="https://heeroluo.github.io/just4/cookie/modules/index.html" target="_blank" class="external">API 文档</a></li>
</ul>
<a id="md:changelog" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Changelog<a href="#md:changelog" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:v210" class="tsd-anchor"></a><h3 class="tsd-anchor-link">v2.1.0<a href="#md:v210" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>获取 cookie 时，区分无 cookie 和 cookie 值为空字符串这两种情况。</li>
</ul>
<a id="md:v200" class="tsd-anchor"></a><h3 class="tsd-anchor-link">v2.0.0<a href="#md:v200" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>设置 cookie 有效时间时，对相对时间的处理修改为通过 <a href="https://www.npmjs.com/package/@just4/util" target="_blank" class="external">@just4/util</a> 中的 <code>addRelativeTime</code> 实现，因此：
<ul>
<li>不再支持小数的数量（例如 <code>0.5 month</code>）。因为单位不一定是常量（例如一个月的总天数可能是 28、29、30、31），数量为小数时，表达的意思不明确。</li>
<li>计算方式的变化。
<ul>
<li>在 1.x 版本中，1 个月按 30 天算。如果有效时间为 1 个月，就是在当前时间的 30 天后过期；自本版本开始，变更为在下个月同一天同样的时间点过期。</li>
<li>在 1.x 版本中，1 年按 365 天算。如果有效时间为 1 年，就是在当前时间的 365 天后过期；自本版本开始，变更为在下一年同一天同样的时间点过期。</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:just4cookie"><span>@just4/cookie</span></a><ul><li><a href="#md:特性"><span>特性</span></a></li><li><a href="#md:安装"><span>安装</span></a></li><li><a href="#md:调用"><span>调用</span></a></li><li><ul><li><a href="#md:读取-cookie"><span>读取 cookie</span></a></li><li><a href="#md:写入-cookie"><span>写入 cookie</span></a></li><li><ul><li><a href="#md:有效时间"><span>有效时间</span></a></li><li><a href="#md:主机名和路径"><span>主机名和路径</span></a></li><li><a href="#md:仅在-https-请求中可用"><span>仅在 https 请求中可用</span></a></li><li><a href="#md:samesite"><span>Same<wbr/>Site</span></a></li><li><a href="#md:指定内容编码"><span>指定内容编码</span></a></li></ul></li><li><a href="#md:删除-cookie"><span>删除 cookie</span></a></li></ul></li><li><a href="#md:相关文档"><span>相关文档</span></a></li><li><a href="#md:changelog"><span>Changelog</span></a></li><li><ul><li><a href="#md:v210"><span>v2.1.0</span></a></li><li><a href="#md:v200"><span>v2.0.0</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>@just4/cookie</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
