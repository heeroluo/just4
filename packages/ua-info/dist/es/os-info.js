import{execRules}from"./internal/ua-detector";import{osRules}from"./internal/os-rules";import{Version}from"./version";const propMap={ios:"isIOS",openharmony:"isOpenHarmony",android:"isAndroid",windows:"isWindows",macos:"isMacOS"};function platformToOS(o){switch(o){case"Android":return"android";case"iPad":case"iPhone":case"iPod":return"ios";case"MacIntel":return"macos";case"Win32":return"windows"}}export class OSInfo{constructor(o,s){var i;let e;if(this.isIOS=!1,this.isAndroid=!1,this.isHarmonyOS=!1,this.isOpenHarmony=!1,this.isWindows=!1,this.isMacOS=!1,null==s?void 0:s.platform){const o=platformToOS(s.platform);void 0!==o&&(e={name:o,version:""})}let n=null!==(i=execRules(o,osRules))&&void 0!==i?i:e;n?(e&&e.name!==n.name&&(n=e),"macos"===n.name&&(null==s?void 0:s.maxTouchPoints)&&(n.name="ios",n.version=""),this[propMap[n.name]]=!0,this.version=Object.freeze(new Version(n.version)),this.isAndroid&&/\bHarmonyOS\b/.test(o)&&(this.isHarmonyOS=!0)):this.version=Object.freeze(new Version(""))}}